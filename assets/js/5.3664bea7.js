(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{409:function(t,e,l){t.exports=l.p+"assets/img/oclint.f9fe3ea4.png"},410:function(t,e,l){t.exports=l.p+"assets/img/oclint2.f8ee30f8.png"},411:function(t,e,l){t.exports=l.p+"assets/img/oclint1.42224b3d.png"},434:function(t,e,l){"use strict";l.r(e);var i=l(56),a=Object(i.a)({},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[i("h3",{attrs:{id:"oclint的安装与使用"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#oclint的安装与使用"}},[t._v("#")]),t._v(" OClint的安装与使用")]),t._v(" "),i("blockquote",[i("p",[t._v("OCLint是一个基于Clang的静态代码分析工具，可以用来提高代码质量，查找潜在的bug，主要针对C,C++和Objective-C进行静态代码分析。\nClang是LLVM编译架构的前端部分，用来编译C,C++和Objective-C的编译器，LLVM架构图如下:")])]),t._v(" "),i("p",[i("img",{attrs:{src:l(409),alt:"LLVM"}})]),t._v(" "),i("p",[t._v("OCLint主要用来检查的代码缺陷类别")]),t._v(" "),i("ol",[i("li",[t._v("可能的缺陷 - 空的if / else / try / catch / finally语句")]),t._v(" "),i("li",[t._v("未使用的代码 - 未使用的局部变量和参数")]),t._v(" "),i("li",[t._v("复杂的代码 - 很高的圈复杂度,NPath复杂性和太高的-NCSS")]),t._v(" "),i("li",[t._v("代码异味 - 长方法和参数列表")])]),t._v(" "),i("p",[t._v("OCLint 有三个指令：oclint、oclint-json-compilation-database、oclint-xcodebuild。")]),t._v(" "),i("ul",[i("li",[t._v("oclint：基础指令。通过这个指令可以指定加载验证规则、编译代码、分析代码和生成报告。"),i("br")]),t._v(" "),i("li",[t._v("oclint-json-compilation-database：高级指令。从编译好的compile_commands.json文件中读取配置信息并执行oclint。"),i("br")]),t._v(" "),i("li",[t._v("oclint-xcodebuild：主要用于生成compile_commands.json文件，现在已经不进行维护了，使用xcpretty代替，来生成json文件。"),i("br")])]),t._v(" "),i("p",[t._v("OCLint安装")]),t._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[t._v("brew install oclint\n")])])]),i("p",[t._v("xcpretty安装（xcpretty是用来格式化xcodebuild输出的工具）")]),t._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[t._v("brew install xcpretty\n")])])]),i("p",[t._v("OCLint使用流程：")]),t._v(" "),i("p",[t._v("先clean指定项目OClint，因为集成了pod，所以使用OClint.xcworkspace；然后再Debug 编译项目了；最后通过xcpretty，使用 -r json-compilation-database 可以生成指定格式的数据。编译成功后，会在项目的文件夹下出现 compile_commands.json 文件。")]),t._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[t._v("xcodebuild -scheme OClint -workspace OClint.xcworkspace clean && xcodebuild -scheme OClint -workspace OClint.xcworkspace -configuration Debug | xcpretty -r json-compilation-database -o compile_commands.json\n")])])]),i("p",[t._v("使用 oclint-json-compilation-database 命令对上一步生成的json数据进行分析，对项目代码进行分析，最终生成report.html文件。OCLint目前支持输出html，json，xml，pmd，Xcode格式文件。")]),t._v(" "),i("div",{staticClass:"language- extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[t._v("oclint-json-compilation-database -e Pods -- -report-type html -o oclintReport.html\n")])])]),i("h4",{attrs:{id:"oclint的结果分析"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#oclint的结果分析"}},[t._v("#")]),t._v(" OCLint的结果分析：")]),t._v(" "),i("p",[i("img",{attrs:{src:l(410),alt:"Resualt"}}),t._v("\n优先级的级别是从Priority 1, Priority 2, Priority 3 依次降低的")]),t._v(" "),i("ul",[i("li",[t._v("Total Files 总文件数")]),t._v(" "),i("li",[t._v("Files with Violations 违规文件数")]),t._v(" "),i("li",[t._v("Compiler Warnings 表示项目中的警告⚠️")]),t._v(" "),i("li",[t._v("Compiler Errors 表示编译错误")]),t._v(" "),i("li",[t._v("Location 表示警告的位置\n报告中的描述其实非常清晰，一般找到代码位置，结合代码理解。")])]),t._v(" "),i("h4",{attrs:{id:"oclint的规则"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#oclint的规则"}},[t._v("#")]),t._v(" OCLint的规则")]),t._v(" "),i("p",[i("strong",[t._v("规则加载选项")])]),t._v(" "),i("ul",[i("li",[t._v("-R <目录>：指定规则加载的目录。可以是多个目录，用空格隔开，默认情况下会搜索 $(oclint 可执行文件目录)/../lib/oclint/rules。")]),t._v(" "),i("li",[t._v("-disable-rule <规则名> 通过规则名使某些验证规则失效。")]),t._v(" "),i("li",[t._v("-rc <参数>=<值> 修改某些阈值。")]),t._v(" "),i("li",[t._v("-i：包含进某些文件")]),t._v(" "),i("li",[t._v("-e：过滤掉某些文件（如Pods文件夹）")]),t._v(" "),i("li",[t._v("-o：将报告输出到目标文件（report.html）")])]),t._v(" "),i("p",[i("strong",[t._v("自定义规则:")])]),t._v(" "),i("table",[i("thead",[i("tr",[i("th",{staticStyle:{"text-align":"left"}},[t._v("参数名")]),t._v(" "),i("th",{staticStyle:{"text-align":"left"}},[t._v("参数注释")]),t._v(" "),i("th",{staticStyle:{"text-align":"left"}},[t._v("默认值")])])]),t._v(" "),i("tbody",[i("tr",[i("td",{staticStyle:{"text-align":"left"}},[t._v("CYCLOMATIC_COMPLEXITY")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("循环嵌套数限制")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("10")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"left"}},[t._v("LONG_CLASS")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("类行数限制")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("1000")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"left"}},[t._v("LONG_LINE")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("每行的字符限制")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("100")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"left"}},[t._v("LONG_METHOD")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("方法行数限制")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("50")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"left"}},[t._v("LONG_VARIABLE_NAME")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("参数名字符限制")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("20")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"left"}},[t._v("MAXIMUM_IF_LENGTH")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("if 的行数限制")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("15")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"left"}},[t._v("MINIMUM_CASES_IN_SWITCH")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("switch case 的最小数目")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("3")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"left"}},[t._v("NPATH_COMPLEXITY")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("通过该方法的非循环执行路径数量限制")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("200")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"left"}},[t._v("NCSS_METHOD")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("连续未注释行数限制")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("30")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"left"}},[t._v("NESTED_BLOCK_DEPTH")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("block 嵌套层数限制")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("5")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"left"}},[t._v("SHORT_VARIABLE_NAME")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("变量名的最小字符数限制")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("3")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"left"}},[t._v("TOO_MANY_FIELDS")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("类成员限制")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("20")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"left"}},[t._v("TOO_MANY_METHODS")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("类方法数限制")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("30")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"left"}},[t._v("TOO_MANY_PARAMETERS")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("参数个数限制")]),t._v(" "),i("td",{staticStyle:{"text-align":"left"}},[t._v("10")])])])]),t._v(" "),i("p",[t._v("OClint原理：\n"),i("img",{attrs:{src:l(411),alt:"yuanli"}})]),t._v(" "),i("p",[t._v("参考文章："),i("br")]),t._v(" "),i("ul",[i("li",[i("a",{attrs:{href:"https://www.wenjiangs.com/article/oclint.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.wenjiangs.com/article/oclint.html"),i("OutboundLink")],1)]),t._v(" "),i("li",[i("a",{attrs:{href:"https://www.jianshu.com/p/b2513f16d246",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.jianshu.com/p/b2513f16d246"),i("OutboundLink")],1)]),t._v(" "),i("li",[i("a",{attrs:{href:"https://blog.csdn.net/weixin_55437537/article/details/113885455",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.csdn.net/weixin_55437537/article/details/113885455"),i("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=a.exports}}]);