<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>performSelector和直接调用方法的区别 | Jorson的个人博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="欢迎来到Jorson的个人博客">
    
    <link rel="preload" href="/kw-blog/assets/css/0.styles.41f8f72f.css" as="style"><link rel="preload" href="/kw-blog/assets/js/app.b958d4e2.js" as="script"><link rel="preload" href="/kw-blog/assets/js/2.1e882bb7.js" as="script"><link rel="preload" href="/kw-blog/assets/js/18.672355b5.js" as="script"><link rel="prefetch" href="/kw-blog/assets/js/10.16ab3e3f.js"><link rel="prefetch" href="/kw-blog/assets/js/11.c2fa39b1.js"><link rel="prefetch" href="/kw-blog/assets/js/12.a6ee2b4e.js"><link rel="prefetch" href="/kw-blog/assets/js/13.7801f0b4.js"><link rel="prefetch" href="/kw-blog/assets/js/14.4f9f6969.js"><link rel="prefetch" href="/kw-blog/assets/js/15.34c109c7.js"><link rel="prefetch" href="/kw-blog/assets/js/16.336c82c3.js"><link rel="prefetch" href="/kw-blog/assets/js/17.c461c0c5.js"><link rel="prefetch" href="/kw-blog/assets/js/19.9b09ceb8.js"><link rel="prefetch" href="/kw-blog/assets/js/20.a5d0a3a0.js"><link rel="prefetch" href="/kw-blog/assets/js/21.89bf4e4e.js"><link rel="prefetch" href="/kw-blog/assets/js/22.8d895b93.js"><link rel="prefetch" href="/kw-blog/assets/js/23.c2b20fca.js"><link rel="prefetch" href="/kw-blog/assets/js/3.f163c3d7.js"><link rel="prefetch" href="/kw-blog/assets/js/4.78725ba6.js"><link rel="prefetch" href="/kw-blog/assets/js/5.3664bea7.js"><link rel="prefetch" href="/kw-blog/assets/js/6.5ec75146.js"><link rel="prefetch" href="/kw-blog/assets/js/7.c57989ef.js"><link rel="prefetch" href="/kw-blog/assets/js/8.67b977fe.js"><link rel="prefetch" href="/kw-blog/assets/js/9.2faab3a0.js">
    <link rel="stylesheet" href="/kw-blog/assets/css/0.styles.41f8f72f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kw-blog/" class="home-link router-link-active"><!----> <span class="site-name">Jorson的个人博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/kw-blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://github.com/Jorson007" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://juejin.cn/user/2163471667175549" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/kw-blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="https://github.com/Jorson007" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://juejin.cn/user/2163471667175549" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>iOS学习</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/kw-blog/iOS/生命周期.html" class="sidebar-link">iOS生命周期</a></li><li><a href="/kw-blog/iOS/模块化.html" class="sidebar-link">iOS模块化</a></li><li><a href="/kw-blog/iOS/OCLint.html" class="sidebar-link">OClint</a></li><li><a href="/kw-blog/iOS/二进制重排.html" class="sidebar-link">二进制重排</a></li><li><a href="/kw-blog/iOS/iOSAPP重签名.html" class="sidebar-link">iOS APP重签名</a></li><li><a href="/kw-blog/iOS/iOS应用瘦身.html" class="sidebar-link">iOS应用瘦身</a></li><li><a href="/kw-blog/iOS/performSelector最全解析.html" class="active sidebar-link">iOS performSelector最全解析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kw-blog/iOS/performSelector最全解析.html#performselector和直接调用方法的区别" class="sidebar-link">performSelector和直接调用方法的区别</a></li><li class="sidebar-sub-header"><a href="/kw-blog/iOS/performSelector最全解析.html#performselector的使用" class="sidebar-link">performSelector的使用</a></li><li class="sidebar-sub-header"><a href="/kw-blog/iOS/performSelector最全解析.html#performselector的位置" class="sidebar-link">performSelector的位置</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>swift</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Flutter学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>图像相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>杂七杂八</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="performselector和直接调用方法的区别"><a href="#performselector和直接调用方法的区别" class="header-anchor">#</a> performSelector和直接调用方法的区别</h2> <p>performSelector: withObject:是在iOS中的一种方法调用方式。他可以向一个对象传递任何消息，而不需要在编译的时候声明这些方法。所以这也是runtime的一种应用方式。</p> <p>所以performSelector和直接调用方法的区别就在与runtime。直接调用编译是会自动校验。如果方法不存在，那么直接调用 在编译时候就能够发现，编译器会直接报错。
但是使用performSelector的话一定是在运行时候才能发现，如果此方法不存在就会崩溃。所以如果使用performSelector的话他就会有个最佳伴侣- (BOOL)respondsToSelector:(SEL)aSelector;来在运行时判断对象是否响应此方法。</p> <h2 id="performselector的使用"><a href="#performselector的使用" class="header-anchor">#</a> performSelector的使用</h2> <p>无参数传递</p> <div class="language- extra-class"><pre class="language-text"><code>[self performSelector:@selector(SelectorNoParameter)];

- (void)SelectorNoParameter{
    NSLog(@&quot;SelectorNoParameter&quot;);
}

</code></pre></div><p>传递一个参数</p> <div class="language- extra-class"><pre class="language-text"><code>[self performSelector:@selector(SelectorOneParameter:) withObject:@&quot;firstParameter&quot;];

- (void)SelectorOneParameter:(NSString *)first{  
    NSLog(@&quot;Logs: %@&quot;, first);
}

</code></pre></div><p>传递两个参数</p> <div class="language- extra-class"><pre class="language-text"><code>[self performSelector:@selector(SelectorFirstParameter:SecondParameter:) withObject:@&quot;firstParameter&quot; withObject:@&quot;secondParameter&quot;];

- (void)SelectorFirstParameter:(NSString *)first SecondParameter:(NSString *)second{
    NSLog(@&quot;Logs %@ %@&quot;, first, second);
}

</code></pre></div><h2 id="performselector的位置"><a href="#performselector的位置" class="header-anchor">#</a> performSelector的位置</h2> <p>在NSObject.h中的方法
1、 - (id)performSelector:(SEL)aSelector;
2、 - (id)performSelector:(SEL)aSelector withObject:(id)object;
3、 - (id)performSelector:(SEL)aSelector withObject:(id)object1 withObject:(id)object2;
三个方法均为同步执行，与线程无关，在主线程和子线程中均可调用。等同于直接调用该方法。
与直接调用方法区别：直接调用编译时会自动校验。performSelector在运行时去找方法，在编译时不做校验。</p> <p>在NSRunloop.h中的方法
1、- (void)performSelector:(SEL)aSelector withObject:(nullable id)anArgument afterDelay:(NSTimeInterval)delay inModes:(NSArray<NSRunLoopMode> *)modes;
2、- (void)performSelector:(SEL)aSelector withObject:(nullable id)anArgument afterDelay:(NSTimeInterval)delay;</NSRunLoopMode></p> <p>3.1、这两个方法为异步执行，delay值为0，仍为异步执行。
1、在主线程执行，方法调用成功。
2、在子线程执行，需要开启子线程Runloop，方法才可以调用成功。
注意：调用该方法之前或在该方法所在的VC释放时主动调用取消函数，以确保不会内存泄露。</p> <p>在NSThread.h中的方法
1、在主线程调用方法
1、- (void)performSelectorOnMainThread:(SEL)aSelector withObject:(nullable id)arg waitUntilDone:(BOOL)wait modes:(nullable NSArray&lt;NSString *&gt; *)array;
2、- (void)performSelectorOnMainThread:(SEL)aSelector withObject:(nullable id)arg waitUntilDone:(BOOL)wait;
在主线程和子线程中均可执行，都会在主线程调用Selector方法。</p> <p>1、在子线程中设置wait值
wait=YES：当前线程被阻塞，主线程执行完Selector，接着执行。
wait=NO：当前线程不被阻塞。</p> <p>2、在主线程中设置wait值
wait=YES：等待Selector执行完，再接着执行。
wait=NO：不等待Selector执行完，接着执行。</p> <p>在指定线程调用方法
(void)performSelector:(SEL)aSelector onThread:(NSThread *)thr withObject:(nullable id)arg waitUntilDone:(BOOL)wait modes:(nullable NSArray&lt;NSString *&gt; *)array API_AVAILABLE(macos(10.5), ios(2.0), watchos(2.0), tvos(9.0));
(void)performSelector:(SEL)aSelector onThread:(NSThread *)thr withObject:(nullable id)arg waitUntilDone:(BOOL)wait API_AVAILABLE(macos(10.5), ios(2.0), watchos(2.0), tvos(9.0));</p> <p>开启子线程在后台运行
(void)performSelectorInBackground:(SEL)aSelector withObject:(nullable id)arg API_AVAILABLE(macos(10.5), ios(2.0), watchos(2.0), tvos(9.0));</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/kw-blog/iOS/iOS应用瘦身.html" class="prev">
        iOS应用瘦身
      </a></span> <span class="next"><a href="/kw-blog/swift/swift中的mutating关键字.html">
        Swift中的mutating关键字
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/kw-blog/assets/js/app.b958d4e2.js" defer></script><script src="/kw-blog/assets/js/2.1e882bb7.js" defer></script><script src="/kw-blog/assets/js/18.672355b5.js" defer></script>
  </body>
</html>
